<!doctype html>
<html lang="en">
<head>
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
		  integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">


	<!-- Mapbox Stuff -->

	<script src='https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.js'></script>
	<link href='https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.css' rel='stylesheet' />

	<!-- Custom CSS	-->


	<title>Weather Map</title>
</head>
<body>

<nav class="navbar navbar-expand-lg  navbar-dark bg-primary">
	<a class="navbar-brand" href="#">Weather App</a>
	<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
		<span class="navbar-toggler-icon"></span>
	</button>

	<div class="collapse navbar-collapse" id="navbarSupportedContent">
		<ul class="navbar-nav ml-auto">
			<li class="nav-item active">
				<a class="nav-link" href="#">Current City: <span id="current-city"></span></a>
			</li>
		</ul>

	</div>
</nav>

	<div class="container mt-5">
		<div class="row" id="weather-row">
			<div class="col" id="weather-card">

			</div>
		</div>
	</div>


<!--	Keys -->
	<script src="js/keys.js"></script>

<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>

<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
		integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
		crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
		integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
		crossorigin="anonymous"></script>

<!-- Custom JS -->

	<script>

		$.get("http://api.openweathermap.org/data/2.5/weather", {
			APPID: OPEN_WEATHER_APPID,
			q:     "San Antonio, US",
			units: "imperial"
		}).done(function(data) {
			console.log(data);

			$('#current-city').html(getCurrentCity(data));
			$('#weather-card').html(createWeatherCard(data));
		});

		function getCurrentCity(data){
			return data.name;
		}

		function createWeatherCard(data){
			var tempMin = data.main.temp_min;
			var tempMax = data.main.temp_max;
			var humidity = data.main.humidity;
			var pressure = data.main.pressure;
			var wind = data.wind.speed;
			var description = data.weather[0].description;
			var icon = data.weather[0].icon;

			var html = '';
			html += '<div class="card">'
			html += '<div class="card-header text-center">'
			html += new Date().toLocaleDateString()
			html += '</div>'
			html += '<div class="card-body">'
			html += '<h5 class="card-title text-center">'+ tempMin + '&#8457 / ' + tempMax +'&#8457</h5>'
			html += '<img class="mx-auto d-block" src="http://openweathermap.org/img/w/' + icon+ '.png" alt="">'
			html += '<p class="card-text"><span class="font-weight-bold">Description: </span>'+ description +'</p>'
			html += '<p class="card-text"><span class="font-weight-bold">Humidity: </span>' + humidity + '</p>'
			html += '<p class="card-text"><span class="font-weight-bold">Wind: </span>' + wind + '</p>'
			html += '<p class="card-text"><span class="font-weight-bold">Pressure: </span>' + pressure + '</p>'
			html += '</div>'
			html += '</div>';

			return html;
		}


	</script>


</body>
</html>